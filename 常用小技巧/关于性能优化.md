### 1.文件加载方式

**css文件放在页面的头部**

```css
<link rel="stylesheet" href="home.css">
```

link标签里面的href（HyperText reference）属性表示超文本引用，当CSS使用href引用，浏览器会识别该文档为CSS，**并行下载，不会停止对当前文档的加载**，在加载html生成DOM tree的时候，就可以同时对DOM tree进行渲染，这样可以防止闪跳，白屏或者布局混乱



**js文件放在body的闭合标签之前**

```html
<script src="home.js"></script>
```

src(source)资源，是页面必不可少的一部分，当script使用src引用，浏览器解析到该元素时会停止对文档的渲染，直到该资源加载完成。这也是将script放底部而不是头部的原因。加载js文件会停止对dom的创建，而且js加载完会立即执行，同时会阻塞后面资源的加载

**我现在就是要把js文件放在头部，怎么处理？(任性的弟弟行为)**
当浏览器解析到script标签时，默认会先先下载js文件下载完了就执行，脚本的执行时同步和阻塞的，为了解决阻塞的问题，script标签新增了两个布尔属性，分别是defer（延迟）和async(异步)

```html
<script src="home.js" defer></script>
<script src="home.js" async></script>
```

当使用defer时，js和html并行下载，不会阻塞dom树的创建，当dom树创建完成时才会执行js
当使用async时，js和html并行下载，当下载完会立即执行js，执行期间会阻塞html的解析



### 2.减少HTTP请求次数

   一个完整的请求都需要经过**DNS寻址、与服务器建立连接、发送数据、等待服务器响应、接收数据**这样一个漫长而复杂的过程。由于**浏览器进行并发请求的请求数都是有上限的**，因此请求数多了以后，浏览器需要分批进行请求，因此会增加用户的等待时间，会给用户造成网站速度慢这样一个印象，即使可能用户能看到的第一屏的资源都已经请求完了，但是浏览器的进度条一直在加载。

   ####     减少请求次数方法

1.合理设置HTTP缓存

```
缓存的力量是强大的，恰当的设置缓存可以大大减少HTTP请求
怎样才算是合理的设置？原则很简单：能缓存越多越久越好。
例如：很少变化的图片资源就可以直接通过HTTP Header中的Expires设置一个很长的过期头；变化不频繁而又可能会变的资源可以使用Last-Modified来做请求验证。尽可能的让资源能够在缓存中待的更久。
```

2.资源合并与压缩

    如果可以的话，尽可能的将外部脚本、样式进行合并，尽可能地合并为一个。另外，CSS、Js、Image都可以用相应的工具
    进行压缩，压缩后往往能节省不少空间。或者使用Webpack等前端工程化工具来进行代码的压缩和去重。
3.CSS Sprites 雪碧图

    雪碧图又叫做精灵图，我们可以把网站中需要用到的一些icon，全部放到一个图片资源中，然后通过改变位置来获取需要的图片，这样合并CSS图片，就可以大幅度减少HTTP请求数了。
    通过background-position对雪碧图定位，以此达到显示的图片
4.瀑布流

    其实懒加载并不能减少HTTP请求数，他只是可以减少页面刚加载的时候的HTTP请求数，总数是不变的。
    对于图片而言，在页面刚加载的时候可能只加载第一屏的图片，随着用户的滚动才会继续加载后面的图片资源，
    这种瀑布流的加载方式就可以有效提高性能。


### 3.减少DOM操作(DOM中操作是最消费性能的)

 Reflow&Repaint
        减少页面的重绘和重排。

        页面有三个树：DOMTree、CSSTree、renderTree。（实际上多于三个），renderTree上有两个规则：repaint和reflow，重绘和重排。
        repaint是元素自身的位置和宽高不变，只改变颜色的之类的属性而不会导致后面的元素位置的变化的时候，renderTree发生的动作。
    reflow是元素自身的位置或者宽高改变了从而导致的整个页面的大范围移动的时候，renderTree发生的动作。
    所以我们在DOM操作的时候，要尽量避免重排。

字符串拼接

        字符串的拼接尽可能少的使用“+”，这种方式的效率是十分低下的，因为每次运行都会开辟新的内存并生成新的字符串变量，然后将拼接的结果赋值给新变量。
        建议使用的是先转化为数组，然后通过数组的join方法来连接成字符串。不过由于数组也有一定的开销，因此就需要权衡一下，当拼接的字符串比
        较少的时候，可以考虑用“+”的方式，比较多的时候就需要考虑用数组的join方法了。
避免使用eval和Function

      ```
  每次 eval 或 Function 构造函数作用于字符串表示的源代码时，脚本引擎都需要将源代码转换成可执行代码。这是很消耗资源的操作
        —— 通常比简单的函数调用慢 100倍以上。
      ```

慎用with

```
with会改变作用域链，有可能导致我们的作用域链变长，导致查询性能下降
```



